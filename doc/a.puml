@startuml ArchitectureHighLevel
!theme plain

package "Game Engine Core" {
    class "Game" {
        - m_World: World*
        - m_Systems: vector
        - m_Running: bool
        --
        + Init(): void
        + Run(): void
        + Update(dt): void
        + Render(): void
        + Shutdown(): void
    }
    
    class "World" {
        - m_Entities: vector
        - m_EntityMap: map
        - m_EventQueue: queue
        - m_Systems: vector
        --
        + CreateEntity(): Entity*
        + GetEntity(id): Entity*
        + RemoveEntity(id): void
        + EmitEvent(event): void
        + ProcessEvents(): void
        + RegisterSystem(system): void
    }
    
    class "Entity" {
        - m_Id: int
        - m_Components: vector
        --
        + AttachComponent(): T*
        + GetComponent(): T*
        + HasComponent(): bool
    }
    
    class "Component" {
        # m_Entity: Entity*
        --
        + virtual OnAttach(): void
        + virtual OnDestroy(): void
    }
    
    class "ISystem" {
        # m_World: World*
        --
        + virtual Update(dt): void
        + virtual Render(): void
        + virtual Init(): void
    }
    
    class "Event" {
        # m_Type: EventType
        # m_Timestamp: double
        --
        + GetType(): EventType
    }
}

package "Concrete Components (7)" {
    class "TransformComponent" {
        - position: glm::vec2
        - velocity: glm::vec2
    }
    
    class "HealthComponent" {
        - currentHealth: int
        - maxHealth: int
    }
    
    class "SpriteComponent" {
        - textureId: int
        - spriteIndex: int
    }
    
    class "ColliderComponent" {
        - bounds: SDL_FRect
        - isActive: bool
    }
    
    class "PlayerComponent" {
        - inputEnabled: bool
    }
    
    class "EnemyComponent" {
        - state: AIState
        - speed: float
    }
    
    class "ObstacleComponent" {
        - type: int
    }
}

package "Concrete Systems (12)" {
    class "PlayerInputSystem"
    class "MovementSystem"
    class "CollisionSystem"
    class "CollisionResponseSystem"
    class "DamageSystem"
    class "EnemyAISystem"
    class "SpawnSystem"
    class "WaveManagerSystem"
    class "RenderSystem"
    class "HUDSystem"
    class "LifetimeSystem"
    class "BackgroundSystem"
}

package "Concrete Events (8)" {
    class "CollisionEvent"
    class "DamageEvent"
    class "DeadEvent"
    class "SpawnWaveEvent"
    class "HealthChangedEvent"
    class "GameOverEvent"
    class "WaveCompleteEvent"
    class "PlayerHitEvent"
}

Game --> World: owns
World --> Entity: manages
World --> ISystem: manages
World --> Event: queues

Entity --> Component: contains
Component <|-- TransformComponent
Component <|-- HealthComponent
Component <|-- SpriteComponent
Component <|-- ColliderComponent
Component <|-- PlayerComponent
Component <|-- EnemyComponent
Component <|-- ObstacleComponent

ISystem <|-- PlayerInputSystem
ISystem <|-- MovementSystem
ISystem <|-- CollisionSystem
ISystem <|-- CollisionResponseSystem
ISystem <|-- DamageSystem
ISystem <|-- EnemyAISystem
ISystem <|-- SpawnSystem
ISystem <|-- WaveManagerSystem
ISystem <|-- RenderSystem
ISystem <|-- HUDSystem
ISystem <|-- LifetimeSystem
ISystem <|-- BackgroundSystem

Event <|-- CollisionEvent
Event <|-- DamageEvent
Event <|-- DeadEvent
Event <|-- SpawnWaveEvent
Event <|-- HealthChangedEvent
Event <|-- GameOverEvent
Event <|-- WaveCompleteEvent
Event <|-- PlayerHitEvent

@enduml