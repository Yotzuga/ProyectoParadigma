@startuml EventArchitecture
!theme plain

package "Event Queue System" {
    component "EventQueue" as Q
    component "Event Base Class" as EB
    component "Concrete Events" as CE
}

package "Emitters" {
    component "CollisionSystem" as CS
    component "DamageSystem" as DS
    component "SpawnSystem" as SS
}

package "Processors" {
    component "CollisionResponse" as CR
    component "HealthSystem" as HS
    component "SpawnProcessor" as SP
}

package "World" {
    component "ProcessEvents()" as PE
}

== EMISIÓN ==

CS -.-> Q: EmitEvent(CollisionEvent)
DS -.-> Q: EmitEvent(DamageEvent)
SS -.-> Q: EmitEvent(SpawnWaveEvent)

Q --> EB
EB --> CE

== PROCESAMIENTO ==

PE --> Q: while(hasEvents)
Q --> CR: GetEvent()
Q --> HS: GetEvent()
Q --> SP: GetEvent()

CR -.-> DS: EmitEvent(DamageEvent)
DS -.-> Q: Enqueue

== DESACOPLAMIENTO ==

note right of Q
    ✓ Emitters no conocen
      a Processors
    
    ✓ Processors no conocen
      a Emitters
    
    ✓ Solo se conocen a través
      de interface de eventos
    
    ✓ Nuevos sistemas pueden
      agregarse sin modificar
      sistemas existentes
end note

@enduml
